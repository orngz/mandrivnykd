/*!
#set ($jsExtension = '.min.js')
#if (!$services.debug.minify)
  #set ($jsExtension = '.js')
#end
*/
require.config({paths:{jsTree:'$!services.webjars.url("jstree", "jstree$jsExtension")',JobRunner:'$!services.webjars.url("org.xwiki.platform:xwiki-platform-job-webjar", "jobRunner$jsExtension")',"tree-finder":'$!services.webjars.url("org.xwiki.platform:xwiki-platform-tree-webjar", "finder$jsExtension")',tree:'$!services.webjars.url("org.xwiki.platform:xwiki-platform-tree-webjar", "tree$jsExtension")'},shim:{jsTree:{deps:["jquery"]}}});require(["jquery","xwiki-meta","tree"],function(c,d){var a=function(){var g=c(this);var j=g.find(".deleteTree");if(j.length){var e=j.data("job-answer-properties-data");var k=j.jstree().get_selected(true);e.allFreePages=false;for(var f=0;f<k.length;++f){var h=k[f];if(h.data.type=="extension"){e.selectedExtensions.push(h.id)}else{if(h.data.type=="page"){e.selectedDocuments.push(h.id)}else{if(h.id=="freePages"){e.allFreePages=true}}}}return e}};var b=function(h){var g=c(this);var f=g.find(".form-question");if(f.length){var i=f.find(".deleteTree");if(i.length){f.data("job-answer-properties-extra",a);var e={selectedExtensions:[],selectedDocuments:[],allFreePages:false,allExtensions:false};i.data("job-answer-properties-data",e);i.xtree({plugins:["checkbox"],core:{themes:{icons:true,dots:true}}});i.on("changed.jstree",function(j){e.allExtensions=false});f.find(".btSelectAllTree").click(function(j){j.preventDefault();i.jstree().check_all();e.allExtensions=true});f.find(".btUnselectAllTree").click(function(j){j.preventDefault();i.jstree().uncheck_all()})}}};c(".ui-question").each(function(){var e=c(this);e.on("job:question:loaded",b);b.bind(e)(null)})});